# Smoking-Free Bot (Inline Buttons)

–¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç —Å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–Ω–æ–ø–æ—á–Ω—ã–º (inline) –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –∏ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π `/top_members`. –ù–∞–∑–Ω–∞—á–∞–µ—Ç —É—á–∞—Å—Ç–Ω–∏–∫–∞–º –∫–∞—Å—Ç–æ–º-—Ç–∞–π—Ç–ª –∞–¥–º–∏–Ω–∞ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –¥–Ω–µ–π ¬´–±–µ–∑ —Å–∏–≥¬ª –∏ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –ø–æ—Å—Ç–∏—Ç –¢–û–ü-10.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ **inline-–∫–Ω–æ–ø–∫–∏** –≤ –õ–°.
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–ª–µ–Ω—Å—Ç–≤–∞ –≤ —Ü–µ–ª–µ–≤–æ–π –≥—Ä—É–ø–ø–µ.
- –ê–≤—Ç–æ–ø–æ–≤—ã—à–µ–Ω–∏–µ –¥–æ ¬´–º–∏–∫—Ä–æ-–∞–¥–º–∏–Ω–∞¬ª —Å –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –ø—Ä–∞–≤–æ–º `can_pin_messages`.
- –ö–∞—Å—Ç–æ–º-—Ç–∞–π—Ç–ª –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (‚â§16 —Å–∏–º–≤–æ–ª–æ–≤, –±–µ–∑ —ç–º–æ–¥–∑–∏), –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ.
- –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –ø–æ—Å—Ç –¢–û–ü-10 –≤ 09:00 (—Ç–∞–π–º–∑–æ–Ω–∞ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è).
- **–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞:** `/top_members` (–≤ –≥—Ä—É–ø–ø–µ).
- Deep-link –∏–∑ –≥—Ä—É–ø–ø—ã –≤ –õ–°: ¬´–ú–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞¬ª.

## üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- Python 3.11+, `aiogram 3.x` (long-polling).
- –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫: APScheduler (cron 09:00).
- –ë–î: SQLite (MVP) / Postgres (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).
- –°–ª–æ–∏: transport (–±–æ—Ç), domain, storage, scheduler, security (HMAC callback).

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ë–æ—Ç ‚Äî –∞–¥–º–∏–Ω —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏ (–ø–æ—Å—Ç–∏–Ω–≥, –ø–∏–Ω, `can_promote_members`).
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏-¬´–º–∏–∫—Ä–æ-–∞–¥–º–∏–Ω—ã¬ª –ø–æ–ª—É—á–∞—é—Ç —Ç–æ–ª—å–∫–æ `can_pin_messages=true`.
- Callback‚Äô–∏ –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è –ø–æ `user_id` + HMAC.
- –°–µ–∫—Ä–µ—Ç—ã ‚Äî —á–µ—Ä–µ–∑ ENV, –ª–æ–≥–∏ –±–µ–∑ –ª–∏—à–Ω–∏—Ö –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (.env)

–ü—Ä–∏–º–µ—Ä ‚Äî –≤ `env.example`. –ù–∞—Å—Ç–æ—è—â–∏–π `.env` –Ω–µ –∫–æ–º–º–∏—Ç–∏–º –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.

```
BOT_TOKEN=
GROUP_CHAT_ID=
TOPIC_ID=
TZ=Europe/Moscow
DAILY_POST_HOUR=9
DAILY_POST_MINUTE=0
OWNER_USER_ID=
DATABASE_URL=postgresql+asyncpg://user:password@localhost:5432/smoking_free
CALLBACK_SECRET=please_change_me
```

üß™ –°—Ü–µ–Ω–∞—Ä–∏–∏ UI
/start –≤ –õ–° ‚Üí ¬´–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é¬ª (inline-–∫–Ω–æ–ø–∫–∏).
‚úÖ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è / –û–±–Ω–æ–≤–∏—Ç—å –¥–∞—Ç—É ‚Üí –º–∞—Å—Ç–µ—Ä:
–¥–∞—Ç–∞: –ø—Ä–µ—Å–µ—Ç—ã (–°–µ–≥–æ–¥–Ω—è/–í—á–µ—Ä–∞/3/7) –∏–ª–∏ –≤–≤–æ–¥ YYYY-MM-DD,
—Ü–µ–Ω–∞: –ø—Ä–µ—Å–µ—Ç—ã (200/250/300) –∏–ª–∏ –≤–≤–æ–¥ —á–∏—Å–ª–∞,
–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ.
üìä –ú–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ ‚Üí —Å—Ç–∞–∂, —ç–∫–æ–Ω–æ–º–∏—è, —Ä–∞–Ω–≥ (–≤ —Ç–µ–∫—Å—Ç–µ).
üîî –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è ‚Üí –≤–∫–ª/–≤—ã–∫–ª –ª–∏—á–Ω–æ–≥–æ —É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è.
‚Ü©Ô∏è –í—ã–π—Ç–∏ –∏–∑ —Ä–µ–π—Ç–∏–Ω–≥–∞ ‚Üí –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ ¬´–î–∞/–ù–µ—Ç¬ª.
–í –≥—Ä—É–ø–ø–µ: /top_members ‚Üí –ø–æ—Å—Ç –¢–û–ü-10 + –∫–Ω–æ–ø–∫–∏ ¬´üì• –ú–æ–π —Å—Ç–∞—Ç—É—Å –≤ –õ–°¬ª, ¬´üîÑ –û–±–Ω–æ–≤–∏—Ç—å –¢–û–ü¬ª, ¬´üìå –ó–∞–∫—Ä–µ–ø–∏—Ç—å¬ª.